<div class="projects-container" [class.reduced-motion]="prefersReducedMotion">
  <!-- Section Header -->
  <div class="projects-header">
    <app-section-heading number="03" title="Projects"></app-section-heading>

    <!-- Filter Toggle -->
    <div class="filter-controls" *ngIf="!loading && !error">
      <button
        class="filter-toggle"
        (click)="toggleFilter()"
        [attr.aria-pressed]="showFeaturedOnly"
        [attr.aria-label]="getFilterAriaLabel()"
        type="button"
      >
        {{ filterButtonText }}
        <span class="filter-count" aria-hidden="true">
          ({{ showFeaturedOnly ? featuredCount : totalCount }})
        </span>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state" role="status" aria-live="polite">
    <div class="loading-spinner" [class.reduced-motion]="prefersReducedMotion"></div>
    <p>Loading projects...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-state" role="alert">
    <p>{{ error }}</p>
    <button
      class="retry-button"
      (click)="loadProjects()"
      type="button"
      aria-label="Retry loading projects"
    >
      Try Again
    </button>
  </div>

  <!-- Projects Grid -->
  <div
    *ngIf="!loading && !error"
    class="projects-grid"
    role="list"
    [attr.aria-label]="getProjectsAriaLabel()"
  >
    <app-project-card
      *ngFor="let project of filteredProjects; trackBy: trackByProjectId"
      [project]="project"
      class="project-card-wrapper"
      role="listitem"
    >
    </app-project-card>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && filteredProjects.length === 0" class="empty-state">
    <p *ngIf="showFeaturedOnly">No featured projects found.</p>
    <p *ngIf="!showFeaturedOnly">No projects found.</p>
  </div>
</div>
